{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/dotfiles","result":{"data":{"markdownRemark":{"id":"0c89f275-c94e-5322-8796-99a2abc5eafe","html":"<h2 id=\"dotfilesの管理がめんどくさい\" style=\"position:relative;\"><a href=\"#dotfiles%E3%81%AE%E7%AE%A1%E7%90%86%E3%81%8C%E3%82%81%E3%82%93%E3%81%A9%E3%81%8F%E3%81%95%E3%81%84\" aria-label=\"dotfilesの管理がめんどくさい permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><em>dotfiles</em>の管理がめんどくさい</h2>\n<p>私は現在(2020/05/25)、いくつか手持ちにパソコンがあります。しかし、<em>OS</em>がバラバラであり<em>dotfiles</em>をそれぞれの<em>OS</em>に合わせて管理するのが非常に面倒でした。</p>\n<p>そのため、このたび<em>macOS</em>と<em>Ubuntu</em>用に合った<em>dotfiles</em>を合体させ新しい<em>dotfiles</em>を作成させました。</p>\n<h3 id=\"ところでdotfilesとは？\" style=\"position:relative;\"><a href=\"#%E3%81%A8%E3%81%93%E3%82%8D%E3%81%A7dotfiles%E3%81%A8%E3%81%AF%EF%BC%9F\" aria-label=\"ところでdotfilesとは？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ところで<em>dotfiles</em>とは？</h3>\n<p><em>dotfiles</em>とはパソコンの設定ファイルをまとめたものです。慣習的にそのように呼んでいるだけで、別名があるのかもしれませんが、<a href=\"https://dotfiles.github.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">非公式なページ</a>も存在するので大体このように読んで齟齬は発生しないと思います。パソコンを買い換える際にローカルの作業環境をできるだけどこでも同じにするという目的で作られます。</p>\n<h2 id=\"ubuntuとmacosの共通化をする際に意識した点\" style=\"position:relative;\"><a href=\"#ubuntu%E3%81%A8macos%E3%81%AE%E5%85%B1%E9%80%9A%E5%8C%96%E3%82%92%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AB%E6%84%8F%E8%AD%98%E3%81%97%E3%81%9F%E7%82%B9\" aria-label=\"ubuntuとmacosの共通化をする際に意識した点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><em>Ubuntu</em>と<em>macOS</em>の共通化をする際に意識した点</h2>\n<p>できるだけ、同じソフトをインストールする際は共通の書き方ができるように意識しました。そのため、<em>apt</em>や<em>brew</em>ではなく、<em>nix</em>という<em>Unix</em>向けのパッケージ管理ソフトを使いました。<em>brew</em>で統一をしなかった点は以下の通りとなっています。</p>\n<p><em>Ubuntu</em>用に<em>brewfile</em>･<em>apt</em>のインストールファイル、<em>macOS</em>用に<em>brewfile</em>を書く労力と<em>Ubuntu</em>用に<em>apt</em>のインストールファイル、<em>macOS</em>用に<em>brewfile</em>、共通の<em>nix</em>ファイルを書く労力はほぼ同じはずですが、前者の場合は依存関係などに悩まされる可能性があり、後述するように再現性のある<em>nix</em>を使うことで同じ労力でより巻き戻しのコストが掛からないよう環境にしました。</p>\n<h3 id=\"ところでnixとは？\" style=\"position:relative;\"><a href=\"#%E3%81%A8%E3%81%93%E3%82%8D%E3%81%A7nix%E3%81%A8%E3%81%AF%EF%BC%9F\" aria-label=\"ところでnixとは？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ところで<em>nix</em>とは？</h3>\n<p><a href=\"https://herp.co.jp/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">HERP</a>という会社で少しバイトをしていたときに知りました。どのようなソフトかは<a href=\"https://nixos.wiki/wiki/Nix\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">公式ホームページ</a>をお読みください…というのは流石に雑すぎるので多少使っている感想も含めて話します。</p>\n<p><em>nix</em>とは再現性のあるパッケージ管理ソフトです。また、宣言的に環境を管理することができ、<em>Linux</em>系の<em>OS</em>、<em>macOS</em>ならば共通して使えるので、今後もし<em>Arch Linux</em>など別の<em>OS</em>を使おうと思った際も楽に環境が構築できるだろうということで導入しました。他には<a href=\"https://cachix.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cachix</a>というソフトを使えば、バイナリのままインストールできるという利点があります。また、アンインストールも楽(<code class=\"language-text\">/nix</code>を消すだけ)で、ロールバックもできるので、やめようと思ったときに簡単にやめられ、失敗しても焦らないという点も良いです。このように色々と利点があるソフトなので導入する価値はあるでしょう。</p>\n<p>…というの建前で、本当に導入をしたのは新しい技術を導入したかったという｢好きだから好き｣くらいの理由です。結果的に便利だったので、使い続けることになりました。ありがとうHERP！(バイトをやめたことを後悔している顔)</p>\n<h3 id=\"ディレクトリ構成\" style=\"position:relative;\"><a href=\"#%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E6%A7%8B%E6%88%90\" aria-label=\"ディレクトリ構成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ディレクトリ構成</h3>\n<p><em>dotfiles</em>のディレクトリ構成は以下の通りです。<code class=\"language-text\">bin</code>というディレクトリの中にインストールファイルなどが入っていおり、<code class=\"language-text\">dotfiles</code>という直下のフォルダがホームディレクトリにリンクされます。<code class=\"language-text\">dotfiles/.config</code>内に各種設定用ディレクトリがあります。</p>\n<p><a href=\"https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">XDG Base Directory Specification</a>に従っており、ディレクトリが整理されているので、ファイルが散らばっておらず修正が加えやすくなっています。</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">.\n├── bin\n└── dotfiles\n   └── .config\n      ├── alacritty\n      ├── cargo\n      ├── doom\n      ├── git\n      │  └── templates\n      ├── karabiner\n      ├── nixpkgs\n      │  └── overlays\n      ├── nvim\n      ├── tmux\n      └── zsh</code></pre></div>\n<h3 id=\"共通化して良かった点と困った点\" style=\"position:relative;\"><a href=\"#%E5%85%B1%E9%80%9A%E5%8C%96%E3%81%97%E3%81%A6%E8%89%AF%E3%81%8B%E3%81%A3%E3%81%9F%E7%82%B9%E3%81%A8%E5%9B%B0%E3%81%A3%E3%81%9F%E7%82%B9\" aria-label=\"共通化して良かった点と困った点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>共通化して良かった点と困った点</h3>\n<p>良かった点は共通化したことでメンテナンスが楽になりました。また、<em>nix</em>を導入したことで今まではビルドエラーになっていたものがそのまますんなりとインストールできるようになり快適です。</p>\n<p>困った点は何故か<em>GUI</em>を使うアプリを<em>nix</em>でインストールすると、<em>Ubuntu</em>で<em>gtk</em>に関するエラーが出る点です。未だにこれが解決しないので、<em>GUI</em>アプリは<em>nix</em>ではインストールしていません。これは調査中です。</p>\n<h2 id=\"最後に\" style=\"position:relative;\"><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\" aria-label=\"最後に permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最後に</h2>\n<p><em>dotfiles</em>の管理ばかりしていて、他のソフトウェアを書かないと本末転倒という意見もあります。</p>","fields":{"slug":"/posts/dotfiles","tagSlugs":["/tag/tech/","/tag/dotfiles/","/tag/ubuntu/","/tag/macos/"]},"frontmatter":{"date":"2021-05-26","description":"本末転倒になりがちなdotfiles","tags":["tech","dotfiles","ubuntu","macos"],"title":"UbuntuとmacOSのdotfilesをまとめた","socialImage":null}}},"pageContext":{"slug":"/posts/dotfiles"}},"staticQueryHashes":["251939775","401334301","825871152"]}