# Lychee configuration for link checking
# https://github.com/lycheeverse/lychee

# Base URL for resolving relative links
base = "https://diohabara.github.io"

# Maximum number of retries
max_retries = 3

# User agent string
user_agent = "Mozilla/5.0 (compatible; lychee/0.20.0; +https://github.com/lycheeverse/lychee)"

# Timeout for each request in seconds
timeout = 30

# Accept HTTP status codes
# 403 is included because some sites block automated requests (e.g., nsa-codebreaker.org)
# 500 is included because some sites have temporary server errors (e.g., dic.nicovideo.jp)
accept = [200, 201, 202, 203, 204, 206, 301, 302, 303, 307, 308, 403, 429, 500]

# Skip checking external links (optional, set to true for faster checks)
skip_missing = false

# Check fragments (anchors)
# Disable fragment checking as Hugo's anchor generation might differ from expectations
include_fragments = false

# Exclude patterns (in addition to .lycheeignore)
exclude = [
    # Protocol-specific links that don't need checking
    "^javascript:",
    "^mailto:",
    "^tel:",
    "^data:",
    # Fragment-only links (anchors on same page)
    "^#",
    # Common CDN/external services that might block automated checks
    "https://fonts.googleapis.com",
    "https://fonts.gstatic.com",
    # Tag pages - lychee offline mode cannot resolve directory/index.html
    # Verified separately in CI "Verify build output" step
    "/tags",
]

# Check internal links (important for catching broken relative links)
include_verbatim = false

# Headers to send with requests
[headers]
accept = "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"
